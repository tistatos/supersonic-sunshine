cmake_minimum_required(VERSION 2.8.12.2)

PROJECT(nanoGUI C CXX)
include(ExternalProject)

set(NANOGUI_PREFIX "${CMAKE_CURRENT_BINARY_DIR}/external/nanogui")
set(NANOGUI_CMAKE_ARGS -DCMAKE_INSTALL_PREFIX=${NANOGUI_INSTALL_DIR})

set(NANOGUI_CMAKE_ARGS
-DNANOGUI_BUILD_PYTHON=OFF
-DNANOGUI_BUILD_EXAMPLE=OFF
-DNANOGUI_INSTALL=OFF
-DNANOGUI_USE_GLAD=OFF
)

ExternalProject_Add(nanoGUI
	PREFIX ${NANOGUI_PREFIX}
	GIT_REPOSITORY http://github.com/wjakob/nanogui.git
	UPDATE_COMMAND ""
	CONFIGURE_COMMAND ""
	BUILD_IN_SOURCE 1
	BUILD_COMMAND ${CMAKE_COMMAND} . ${NANOGUI_CMAKE_ARGS}
	INSTALL_COMMAND make
)

set(NANOGUI_INCLUDE_DIR
${NANOGUI_PREFIX}/src/nanoGUI/include
${NANOGUI_PREFIX}/src/nanoGUI/ext/eigen
${NANOGUI_PREFIX}/src/nanoGUI/ext/nanovg/src
PARENT_SCOPE)
set(GLFW_INCLUDE_DIR ${NANOGUI_PREFIX}/src/nanoGUI/ext/GLFW/include PARENT_SCOPE)
set(NANOGUI_LIBRARIES ${NANOGUI_PREFIX}/src/nanoGUI/libnanogui${CMAKE_SHARED_LIBRARY_SUFFIX} PARENT_SCOPE)
